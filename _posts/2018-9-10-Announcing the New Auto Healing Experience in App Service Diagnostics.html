---
title: "Announcing the New Auto Healing Experience in App Service Diagnostics" 
hide_excerpt: true
---
<html><head>
<meta charset="utf-8"/>
</head>
<body>
<div id="page">

<a class="url fn n profile-usercard-hover" href="https://social.msdn.microsoft.com/profile/Jennifer Lee (MSFT)" target="_blank">Jennifer Lee (MSFT)</a>
<time>    9/10/2018 9:31:11 AM</time>
<hr/>
<div id="content"><strong>Note: Currently, this new experience is only for Windows web apps for now.</strong>

Hopefully, most of the time your apps are running healthily and happily. However, sometimes your app may run into issues, resulting in downtimes, slowness, or other unexpected behaviors. We’ve built App Service Diagnostics to help you diagnose and solve issues with your web app with recommended troubleshooting and next steps. You can learn more about App Service Diagnostics <a href="https://docs.microsoft.com/en-us/azure/app-service/app-service-diagnostics">here.</a>

However, these unexpected behaviors may be temporarily resolved with some simple mitigation steps, such as restarting the process or starting another executable, or require additional data collection, so that you can better troubleshoot the ongoing issue at a later time.

Today, we’re excited to announce our new Auto Healing experience in App Service Diagnostics. With our new <strong>Auto Healing</strong> tile shortcut, you can set up custom mitigation actions to run when certain conditions (that you define as unexpected or a sign of unhealthy behavior) are met.

<a href="{{ site.baseurl }}/media/2018/08/homepage_small.png"></a>
Click <strong>Diagnostic Tools</strong> from the App Service Diagnostics homepage. 
<a href="{{ site.baseurl }}/media/2018/08/autoheal54.png"></a>
Then, click <strong>Auto Healing</strong>.
<h2>How to Get Started</h2>
<a href="{{ site.baseurl }}/media/2018/08/2018-08-23_14h28_29.png"><img alt="" class="alignnone size-large wp-image-9445" height="589" src="{{ site.baseurl }}/media/2018/08/2018-08-23_14h28_29-1024x686.png" width="879"/></a>
<strong>Step 1: Define conditions</strong>

Select the tile that best matches the condition that you want to set for your mitigation rule.

The conditions that are supported with the new Mitigate/Auto Heal experience in App Service Diagnostics are:
<ul>
<li>Request Duration: examines slow requests</li>
<li>Memory Limit: examines process memory in private bytes</li>
<li>Request Count: examines number of requests</li>
<li>Status Codes: examines number of requests and their HTTP status code</li>
</ul>
After reading the description, select the blue button to configure the rule parameters. Parameters that have a red asterisk next to it are required fields.

<a href="{{ site.baseurl }}/media/2018/08/2018-08-23_14h29_31.png"><img alt="" class="alignnone size-large wp-image-9465" height="436" src="{{ site.baseurl }}/media/2018/08/2018-08-23_14h29_31-1024x508.png" width="879"/></a>
<strong>Step 2: Configure actions</strong>

Select the tile that best matches the auto heal mitigation action that you want to perform under your mitigation rule conditions. When the graphic is blue, it means that action has been selected. (For custom actions, be sure to fill out the parameters required).

The custom mitigation actions that are supported are:
<ul>
<li>Recycle Process</li>
<li>Log an Event</li>
<li>Custom Action
<ul>
<li>Run Diagnostics: runs</li>
<li>Run Any Executable: runs specified executable</li>
</ul>
</li>
</ul>
<a href="{{ site.baseurl }}/media/2018/08/2018-08-23_14h29_59.png"><img alt="" class="alignnone size-large wp-image-9475" height="415" src="{{ site.baseurl }}/media/2018/08/2018-08-23_14h29_59-1024x484.png" width="879"/></a>
<strong>Step 3: Override when action executes (optional)</strong>

Sometimes when an app has a long startup time, depending on the mitigation rule conditions that are set, it may kick off the mitigation action during app startup, which is not the intended use case. By modifying the startup time, you can specify how much time the mitigation rule should wait after the process startup before the mitigation rule kicks off.

<a href="{{ site.baseurl }}/media/2018/08/2018-08-23_14h30_24.png"><img alt="" class="alignnone size-large wp-image-9485" height="254" src="{{ site.baseurl }}/media/2018/08/2018-08-23_14h30_24-1024x296.png" width="879"/></a>
<strong>Step 4: Review and save your settings</strong>

Here, you can review the rules that you just created and save them. If you have previously defined rules, they will show up under Current Settings (no rules will show up under Current Settings until they are saved).

Saving mitigation settings will restart the application domain for the web app and this can cause logged-in user information, sessions, and in-memory cache to be cleared. Hence, it is advised to make these changes during non-business hours.

Two things to keep in mind:
<ul>
<li>These mitigation actions should only be considered a temporary workaround until you find the real cause for the issue causing the unexpected behavior. For the latter, you can start with App Service Diagnostics to figure out what actually went wrong.</li>
<li>The feature in this blog post is in addition to Proactive Auto Heal, which is automatically restarts your web app based on our percent memory and percent request rules. <a href="https://blogs.msdn.microsoft.com/appserviceteam/2017/08/17/proactive-auto-heal/">Learn more about Proactive Auto Heal here.</a></li>
</ul>
<strong>How to Delete a Mitigation Rule</strong>

For the mitigation rule that you want to delete, select the condition that the rule is set on. Then, click on the trash can next to the rule that you configured.

<a href="{{ site.baseurl }}/media/2018/08/2018-08-23_14h29_03.png"><img alt="" class="alignnone size-large wp-image-9455" height="249" src="{{ site.baseurl }}/media/2018/08/2018-08-23_14h29_03-1024x290.png" width="879"/></a>

Get ahead of your issues and automatically mitigate these unexpected behaviors by trying out Mitigate and Auto Heal in App Service Diagnostics.

 

 </div>
</div></body>
<script src="{{ site.baseurl }}/resource/jquery-1.12.1.min.js" type="text/javascript"></script>
<script src="{{ site.baseurl }}/resource/replace.js" type="text/javascript"></script>
</html>
